{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_ping","parameters":[],"responses":{"200":{"description":"Hello World!","content":{"application/json":{"schema":{"type":"object"}}}}},"tags":["App"]}},"/api/crm/v1/customers":{"get":{"operationId":"CustomersController_findById","parameters":[{"name":"id","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"Get customer by id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}}}},"tags":["Customers"]}},"/api/crm/v1/customers/clients":{"get":{"operationId":"CustomersController_getClients","parameters":[{"name":"query","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Get all clients","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Customer"}}}}}},"tags":["Customers"]}},"/api/crm/v1/customers/search":{"get":{"operationId":"CustomersController_search","parameters":[{"name":"queryString","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"Search customer by id, email or phone","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Customer"}}}}}},"tags":["Customers"]}},"/api/crm/v1/activities":{"get":{"operationId":"ActivitiesController_findAll","parameters":[],"responses":{"200":{"description":"Get all activities.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Activity"}}}}}},"tags":["Activities"]},"post":{"operationId":"ActivitiesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateActivityDto"}}}},"responses":{"201":{"description":"Create a new activity.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Activity"}}}}},"tags":["Activities"]}},"/api/crm/v1/subscriptions":{"post":{"operationId":"SubscriptionsController_createSubscription","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionDto"}}}},"responses":{"201":{"description":"The record has been successfully created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MergedSubscriptions"}}}}},"tags":["Subscriptions"]},"get":{"operationId":"SubscriptionsController_getSubscriptions","parameters":[{"name":"month","required":true,"in":"query","schema":{"type":"string"}},{"name":"year","required":true,"in":"query","schema":{"type":"string"}},{"name":"activity","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"The found record","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MergedSubscriptions"}}}}}},"tags":["Subscriptions"]}},"/api/crm/v1/subscriptions/{date}/{customer_id}/{action}":{"delete":{"operationId":"SubscriptionsController_deleteSubscription","parameters":[{"name":"date","required":true,"in":"path","schema":{"type":"string"}},{"name":"customer_id","required":true,"in":"path","schema":{"type":"string"}},{"name":"action","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The record has been successfully deleted.","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Subscriptions"]}},"/api/crm/v1/impayes":{"get":{"operationId":"ImpayesController_getImpayes","parameters":[{"name":"month","required":true,"in":"query","schema":{"type":"string"}},{"name":"year","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"The found record","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Customer"}}}}}},"tags":["Imapyes"]},"post":{"operationId":"ImpayesController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionDto"}}}},"responses":{"200":{"description":"The found record","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Customer"}}}}}},"tags":["Imapyes"]},"patch":{"operationId":"ImpayesController_update","parameters":[{"name":"subscription_id","required":true,"in":"query","schema":{"type":"string"}},{"name":"year","required":true,"in":"query","schema":{"type":"string"}},{"name":"month","required":true,"in":"query","schema":{"type":"string"}},{"name":"amount","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"The found record","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Customer"}}}}}},"tags":["Imapyes"]}},"/api/crm/v1/impayes/{subscription_id}":{"get":{"operationId":"ImpayesController_getImpaye","parameters":[{"name":"subscription_id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The found record","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Subscription"}}}}}},"tags":["Imapyes"]}},"/api/crm/v1/tasks":{"get":{"operationId":"TasksController_getTasks","parameters":[{"name":"month","required":true,"in":"query","schema":{"type":"string"}},{"name":"year","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"The found record","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Task"}}}}}},"tags":["Tasks"]},"patch":{"operationId":"TasksController_updateStatus","parameters":[{"name":"subscription_id","required":true,"in":"query","schema":{"type":"string"}},{"name":"month","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"The found record","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Task"}}}}}},"tags":["Tasks"]}},"/api/crm/v1/templates/{name}":{"get":{"operationId":"TemplateController_getTemplate","parameters":[{"name":"name","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The found record","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Template"}}}}}},"tags":["Template"]}},"/api/crm/v1/utils/sendinblue":{"get":{"operationId":"SendinblueController_sendMail","parameters":[{"name":"email","required":true,"in":"query","schema":{"type":"string"}},{"name":"name","required":true,"in":"query","schema":{"type":"string"}},{"name":"subject","required":true,"in":"query","schema":{"type":"string"}},{"name":"htmlContent","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"The found record","content":{"application/json":{"schema":{"type":"string"}}}}},"tags":["Sendinblue"]}}},"info":{"title":"Capital Marketing API","description":"CRM for Capital marketing & Web Leader Communication","version":"1.0.0","contact":{"name":"Ruben Lellouche","url":null,"email":"rubenlellouche26@gmail.com"}},"tags":[{"name":"CRM","description":""}],"servers":[{"url":"https://webleadercomprd.herokuapp.com","description":"Production Server"}],"components":{"schemas":{"Customer":{"type":"object","properties":{"id":{"type":"number","description":"Customer ID"},"name":{"type":"string","description":"Customer name"},"email":{"type":"string","description":"Customer email"},"phone":{"type":"string","description":"Customer phone"},"activity":{"type":"string","description":"Customer activity"},"departement":{"type":"string","description":"Customer address"},"region":{"type":"string","description":"Customer address"},"zip":{"type":"string","description":"Customer address"},"country":{"type":"string","description":"Customer address"},"radius":{"type":"string","description":"Customer address"},"nbr_presta":{"type":"string","description":"Customer address"},"status":{"type":"string","description":"Status"},"isClient":{"type":"boolean","description":"Is client"},"affectation":{"type":"string","description":"Affectation"},"send_by":{"type":"string","description":"Send by channel"},"sa_name":{"type":"string","description":"Proprieaire"},"creation_date":{"type":"string","description":"Creation date"}},"required":["id","name","email","phone","activity","departement","region","zip","country","radius","nbr_presta","status","isClient","affectation","send_by","sa_name","creation_date"]},"Activity":{"type":"object","properties":{"id":{"type":"number","example":1,"description":"Customer ID"},"title":{"type":"string","example":"John Doe","description":"Customer name"},"description":{"type":"string","example":"John Doe","description":"Customer name"}}},"CreateActivityDto":{"type":"object","properties":{"title":{"type":"string","description":"Activity title"},"description":{"type":"string","description":"Activity description"},"customers":{"type":"string","description":"Activity location"}},"required":["title","description","customers"]},"SubscriptionDto":{"type":"object","properties":{"customer_id":{"type":"string","description":"Customer ID"},"monthly_price":{"type":"number","description":"Monthly Price"},"start_date":{"type":"string","description":"Start Date"},"payment_method":{"type":"string","description":"Payment Method"}},"required":["customer_id","monthly_price","start_date","payment_method"]},"Subscription":{"type":"object","properties":{"subscription_id":{"type":"string","description":"Subscription ID"},"customer_id":{"type":"string","description":"Customer ID"},"monthly_price":{"type":"number","description":"Monthly price"},"month":{"type":"string","description":"Month"},"year":{"type":"string","description":"Year"},"status":{"type":"string","description":"Status"},"is_paid":{"type":"boolean","description":"Is paid"},"payment_method":{"type":"string","description":"Payment method"}},"required":["subscription_id","customer_id","monthly_price","month","year","status","is_paid","payment_method"]},"MergedSubscriptions":{"type":"object","properties":{"customer_id":{"type":"string","description":"Customer ID"},"subscription":{"description":"Subscription per month","type":"array","items":{"$ref":"#/components/schemas/Subscription"}}},"required":["customer_id","subscription"]},"Task":{"type":"object","properties":{"task_id":{"type":"number","description":"Task ID"},"subscription_id":{"type":"string","description":"Subscription ID"},"customer_id":{"type":"string","description":"Customer ID"},"actions":{"type":"string","description":"Task Name"},"type":{"type":"string","description":"Task type"},"month":{"type":"string","description":"Month"},"year":{"type":"string","description":"Year"},"monthly_price":{"type":"string","description":"Monthly Price"},"status":{"type":"string","description":"Status"},"list_id":{"type":"string","description":"List ID"}},"required":["task_id","subscription_id","customer_id","actions","type","month","year","monthly_price","status","list_id"]},"Template":{"type":"object","properties":{}}}}}